#include <windows.h>
#include <stdio.h>

int main(){
    SHELLEXECUTEINFO shExInfo = {0};
    shExInfo.cbSize = sizeof(shExInfo);
    shExInfo.fMask = SEE_MASK_NOCLOSEPROCESS;
    shExInfo.hwnd = 0;
    shExInfo.lpVerb = "runas";                // Operation to perform
    shExInfo.lpFile = "cmd.exe";       // Application to start    
    shExInfo.lpParameters = "/c powershell.exe";                  // Additional parameters
    shExInfo.lpDirectory = 0;
    shExInfo.nShow = SW_SHOW;
    shExInfo.hInstApp = 0;  
    for(;;){
        if (ShellExecuteEx(&shExInfo)){
            printf("Ayy it worked\n");
            WaitForSingleObject(shExInfo.hProcess, INFINITE);
            CloseHandle(shExInfo.hProcess);
            break;
        } else{
            MessageBoxA(NULL, "Bro just click yes its fine", "Dude relax", MB_OK);
        }
    }
  printf("I can't believe it actually worked!\n");
}