#include <windows.h>
#include <stdio.h>

int main(int argc, char* argv[] ){
    char defaultMessage[] = "Hello world!";
    char base[] = "Hello there";
    char *message = NULL;
    char *buffer = NULL;

    if (argc == 2){
        size_t nameLen = strlen(argv[1]);
        buffer = (char*) malloc( strlen(base) + strlen(argv[1]) + 3);
        sprintf(buffer, "%s %s!", base, argv[1]);
        message = buffer;
    } else{
        message = defaultMessage;
    }

    MessageBoxA(NULL, message, "Greetings!", MB_OK);
    
    if(buffer != NULL){
        free(buffer);
    }
    return 0;   
}